# 22 永远不止于此

学习 Docker 是一项非常令人兴奋的技术，因为它有如此多的用途——从运行自己的 Git 服务器到将遗留应用程序迁移到云端，再到构建和运行全新的云原生应用程序。我希望我们在本书中走过的旅程已经帮助你增强了在容器方面的信心，现在你知道你可以在当前或下一个项目中如何使用它们。最后一章为你提供了一些提示，告诉你如何成功实现这一点，并以 Docker 社区的介绍结束。

## 22.1 运行你自己的概念验证

你使用 Docker 越多，你对容器就越熟悉，你从这项技术中获得的也会越多。几乎任何应用程序都可以容器化，所以运行一个概念验证（PoC），将你自己的应用程序之一迁移到 Docker，是一个很好的开始。这将给你一个机会将本书中的实用技能应用到你的工作中，最终结果将是你可以向团队其他成员展示的东西。

成功的 PoC 不仅涉及 `docker image build` 和 `docker container run`。如果你真的想向人们展示容器的能力，你的 PoC 应该有更广泛的范围：

+   努力将多个组件 Docker 化，这样你就可以展示 Docker Compose 运行应用程序不同配置的能力（参见第十章）。

+   从一开始就遵循最佳实践，展示迁移到 Docker 如何改善整个交付生命周期——使用多阶段 Dockerfile 并对其进行优化，包括你的黄金镜像（第十七章）。

+   包括集中式日志（第十九章）和度量（第九章）的可观察性。一个有意义的 Grafana 仪表板和用 Kibana 搜索日志的能力将使你的 PoC 超越基础。

+   建立一个 CI/CD 流水线，即使是一个非常简单的使用容器中的 Jenkins（第十一章）的流水线，以展示如何使用 Docker 自动化一切。

PoC 不需要涉及巨大的努力。即使范围扩大到这种程度，我认为如果你从一个相当简单的应用程序开始，你可以舒适地将这项练习限制在五天内。你不需要整个团队都参与；在这个阶段，它只是一个副项目即可。

但如果你在工作中无法获得使用 Docker 的批准，这并不意味着你需要停止——许多 Docker 高级用户都是从家里开始的。你可以在树莓派上运行一些相当令人印象深刻的软件容器，这将使你定期使用 Docker。

## 22.2 在你的组织中为 Docker 做出案例

Docker 对大多数组织来说是一个巨大的变革，因为它几乎影响到 IT 的各个方面，并不是每个团队都准备好接受一种新的工作方式。这本书中应该有足够的内容来帮助你向其他技术团队展示迁移到 Docker 的优势，但以下是我发现对不同利益相关者有吸引力的关键主题：

+   开发者可以在他们的机器上运行整个应用程序堆栈，使用与生产环境中完全相同的技术。不再有浪费时间去追踪缺失的依赖项或处理多个软件版本的问题。开发团队使用与运维团队相同的工具，因此组件有共同的所有权。

+   运营商和管理员可以针对每个应用程序使用标准工具和流程，每个容器化组件都有一个标准的 API 用于日志记录、指标和配置。部署和回滚将完全自动化，故障应该变得很少见，发布可以更频繁地进行。

+   数据库管理员可能不想在生产环境中运行数据库容器，但容器是提供给开发人员和测试团队自助服务的好方法，这样他们就不需要 DBA 为他们创建数据库。数据库模式可以移动到源控制，并打包在 Docker 镜像中，也将 CI/CD 带入数据库开发。

+   安全团队将关注运行时容器的妥协，但 Docker 允许你在整个生命周期中采用深度安全。黄金镜像、安全扫描和镜像签名都提供安全的软件供应链，这让你对部署的软件更有信心。运行时工具如 Aqua 和 Twistlock 可以自动监控容器行为并关闭攻击。

+   业务利益相关者和产品所有者理解发布语言——他们知道历史上的发布问题导致了越来越多的质量关卡，这导致了越来越少地发布。自愈应用程序、健康仪表板和持续部署都应该鼓励用户，迁移到容器意味着更好的软件质量，并且等待新功能的时间更短。

+   高级管理层对业务的兴趣（希望如此）将与业务保持一致，但他们也会密切关注 IT 预算。将应用程序从虚拟机迁移到容器可以节省大量资金，因为当你运行更多应用程序在更少的容器服务器上时，你可以合并硬件。这也减少了操作系统许可证。

+   IT 管理层应该意识到容器趋势不会消失。Docker 自 2014 年以来一直是一个成功的产品，所有主要云服务提供商都提供托管容器平台。将 Docker 纳入你的路线图将使你的技术堆栈保持最新，并让团队保持满意。

## 22.3 规划生产路径

如果你想让你的组织与你同行，理解你在 Docker 中的目标至关重要。本书开头，我向您介绍了五种由 Docker 支持的项目类型——从现代化遗留应用程序到运行无服务器函数。无论你的 PoC 是否符合这些定义，或者你正在做更独特的事情，你都需要理解最终目标，以便你可以规划你的路线图并跟踪进度。

你需要做出的主要决定是在 Docker Swarm 和 Kubernetes 之间。你在本书中使用了 Swarm，这是一个很好的入门方式，但如果你正在考虑云服务，Kubernetes 是更好的选择。你可以在 Kubernetes 中使用所有的 Docker 镜像，但应用程序定义的格式与 Docker Compose 不同，而且你需要考虑一个相当陡峭的学习曲线；通过《一个月午餐学 Kubernetes》这本书可以帮助你度过这个阶段。如果你计划在数据中心运行容器平台，我的建议是先从 Docker Swarm 开始，它在操作上易于管理。Kubernetes 是一个复杂的系统，需要专门的行政团队，并且商业产品可能是一个更好的选择。

## 22.4 认识 Docker 社区

我将以确保你知道你不是一个人结束。Docker 社区非常庞大，有一个非常活跃的在线空间，全球范围内都有面对面的聚会。你肯定能找到愿意分享他们知识和经验的人，Docker 社区几乎是所有社区中最友好的。以下是加入的方式：

+   Docker 社区 Slack 群组-- *[`dockr.ly/slack`](https://dockr.ly/slack)* .

+   找一个面对面的或虚拟的聚会-- *[`events.docker.com`](https://events.docker.com)* .

+   关注 Docker Captains；这些是 Docker 认可的专家和分享者社区成员-- *[www.docker.com/community/captains](http://www.docker.com/community/captains)* .

+   DockerCon，容器会议-- *[`dockercon.com`](https://dockercon.com)* .

我也是这个社区的一员--你可以在社区 Slack @elton-stoneman 和 Twitter @EltonStoneman 找到我；随时欢迎联系我。你还可以在 GitHub (@sixeyed) 和我的博客，*[`blog.sixeyed.com`](https://blog.sixeyed.com)* 找到我。感谢阅读。我希望你觉得这本书有用，并希望 Docker 能带你到想去的地方。
