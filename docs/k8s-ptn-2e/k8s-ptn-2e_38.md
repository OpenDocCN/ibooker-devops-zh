# 第三十二章：结语

Kubernetes 是在规模上部署和管理容器化分布式应用程序的领先平台。然而，这些集群内应用程序依赖于集群外的资源，包括数据库、文档存储、消息队列和其他云服务。Kubernetes 并不仅限于管理单个集群内的应用程序。Kubernetes 还可以通过各种云服务的操作者编排集群外资源。这使得 Kubernetes API 不仅可以成为集群内容器的期望状态的唯一“真相源”，还可以成为集群外资源的期望状态的唯一“真相源”。如果您已经熟悉 Kubernetes 模式和操作应用程序的实践，您可以利用这些知识来管理和使用外部资源。

Kubernetes 集群的物理边界并不总是符合所需的应用程序边界。组织经常需要在多个数据中心、云和 Kubernetes 集群之间部署应用程序，出于各种原因，如扩展、数据局部性、隔离等。通常，同一应用程序或一组应用程序必须部署到多个集群中，这需要多集群部署和编排。Kubernetes 经常嵌入在各种第三方服务中，用于在多个集群中操作应用程序。这些服务利用 Kubernetes API 作为控制平面，每个集群作为数据平面，使 Kubernetes 能够跨多个集群扩展其功能。

如今，Kubernetes 已经超越了仅仅是一个容器编排器的角色。它能够管理集群内、集群外和多集群资源，使其成为一种多功能且可扩展的操作模型，用于管理多种资源。其声明式 YAML API 和异步协调过程已经成为资源编排范式的代名词。其自定义资源（CRDs）和操作者（Operators）已成为合并领域知识与分布式系统的常见扩展机制。我们相信，大多数现代应用程序将运行在提供 Kubernetes API 或受 Kubernetes 抽象和模式强烈影响的运行时平台上。如果你是一个开发这类应用程序的软件开发人员，你必须精通现代编程语言，以实现业务功能，同时也要了解云原生技术。Kubernetes 模式将成为整合应用程序与运行时平台的必备常识。熟悉 Kubernetes 模式将使您能够在任何环境中创建和运行应用程序。

# 我们覆盖的内容

在本书中，我们涵盖了 Kubernetes 中最流行的模式，分组如下：

+   *基础模式*代表容器化应用必须遵循的原则，以成为良好的云原生应用。无论应用的性质和你可能面临的约束是什么，你都应该力求遵循这些准则。遵循这些原则将有助于确保你的应用程序适合在 Kubernetes 上进行自动化。

+   *行为模式*描述了 Pod 与管理平台之间的通信机制和交互方式。根据工作负载的类型，一个 Pod 可能会作为批处理作业运行直至完成，或者定期调度运行。它可以作为无状态或有状态服务运行，也可以作为守护服务或单实例运行。选择正确的管理原语将帮助您以所需的保证运行 Pod。

+   *结构模式*专注于在 Pod 中结构化和组织容器，以满足不同的使用场景。拥有良好的云原生容器是第一步，但这并不足够。重用容器并将它们组合成 Pod 以实现期望的结果是下一步。

+   *配置模式*涵盖了在云上为不同配置需求定制和调整应用程序的过程。每个应用程序都需要进行配置，没有一种方法适合所有情况。我们从最常见的模式到最专业化的模式进行探索。

+   *安全模式*描述了如何在与 Kubernetes 交互时限制应用程序。容器化应用程序也有安全维度，我们涵盖了与节点的应用程序交互、与其他 Pod 的交互、Kubernetes API 服务器以及安全配置。

+   *高级模式*探索了不适合其他类别的更复杂的主题。其中一些模式，如*控制器*，已经很成熟——Kubernetes 本身就是建立在它之上的——而一些模式仍在不断发展，可能在你阅读本书时已经发生了变化。但这些模式涵盖了云原生开发人员应熟悉的基本思想。

# 最后的话

就像所有好东西一样，这本书也已经结束了。我们希望你喜欢阅读本书，并且它改变了你对 Kubernetes 的看法。我们真诚地相信，Kubernetes 及其衍生的概念将像面向对象编程概念一样基础。这本书是我们尝试创建《设计模式》四人帮的容器编排版本。我们希望这不是结束，而是你的 Kubernetes 之旅的开始；对我们来说，它确实如此。

祝你在使用 kubectl 时愉快。
