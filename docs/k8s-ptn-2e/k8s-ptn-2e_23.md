# 第四部分：配置模式

每个应用程序都需要配置，而最简单的方法是将配置存储在源代码中。然而，这种方法的副作用是代码和配置的生命周期紧密相关。我们需要灵活性来适应配置，而无需修改应用程序并重新创建其容器映像。事实上，将代码和配置混合在一起是持续交付方法的反模式，其中应用程序只创建一次，然后在部署管道的各个阶段中不经修改地移动，直到达到生产环境。实现代码和配置分离的方法是使用外部配置数据，每个环境的数据都不同。以下章节中的模式都是关于使用外部配置自定义和适应各种环境的应用程序：

+   第十九章，“环境变量配置”，使用环境变量存储配置数据。

+   第二十章，“配置资源”，使用像 ConfigMaps 或 Secrets 这样的 Kubernetes 资源来存储配置信息。

+   第二十一章，“不可变配置”，通过将大型配置集成容器中，在运行时将其链接到应用程序，实现了配置的不可变性。

+   第二十二章，“配置模板”，适用于需要管理大量仅略有不同的多个环境的配置文件时非常有用。
